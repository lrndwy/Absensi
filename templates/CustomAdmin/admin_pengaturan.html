{% extends 'base.html' %} {% load static %} {% block content %}
<c-dashboard title="Pengaturan" logo="{{ logoimage }}">
    <div class="flex flex-col mt-14 gap-4 dark:bg-gray-700">
    {% include 'notification.html' %}
        <c-heading title="Pengaturan" subtitle="Pengaturan Website">
            <img src="{{ logoimage }}" alt="logo" class="w-10 h-10">
        </c-heading>
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
            <form method="POST" action="{% url 'admin_pengaturan' %}" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="flex flex-col gap-4">
                    <div class="mb-4 relative">
                        <input type="text" id="nama_sekolah" name="nama_sekolah" value="{{ instalasi.nama_sekolah }}" class="block rounded-t-lg px-2.5 pb-2.5 pt-5 w-full text-sm text-gray-900 bg-gray-50 dark:bg-gray-700 border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer"
                            placeholder=" " required />
                        <label for="nama_sekolah" class="absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-4 z-10 origin-[0] start-2.5 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto">Nama
                            Sekolah</label>
                    </div>
                    <div class="mb-6 relative">
                        <input type="text" id="deskripsi" name="deskripsi" value="{{ instalasi.deskripsi }}" class="block rounded-t-lg px-2.5 pb-2.5 pt-5 w-full text-sm text-gray-900 bg-gray-50 dark:bg-gray-700 border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer"
                            placeholder=" " required />
                        <label for="deskripsi" class="absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-4 z-10 origin-[0] start-2.5 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto">Deskripsi</label>
                    </div>
                    <div class="mb-6 relative">
                        <label class="block mb-2 text-xs font-medium text-gray-900 dark:text-white" for="logo">Upload
                            Logo</label>
                        <input class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400" name="logo" id="logo" type="file">                        {% if instalasi.logo %}
                        <p class="mt-1 text-sm text-gray-500 dark:text-gray-300">Logo saat ini: {{ instalasi.logo.name }}
                        </p>
                        {% endif %}
                    </div>
                    <div class="mb-6 relative">
                        <textarea id="alamat" name="alamat" class="block rounded-t-lg px-2.5 pb-2.5 pt-5 w-full text-sm text-gray-900 bg-gray-50 dark:bg-gray-700 border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer"
                            placeholder=" " required>{{ instalasi.alamat }}</textarea>
                        <label for="alamat" class="absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-4 z-10 origin-[0] start-2.5 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto">Alamat</label>
                    </div>              <div class="mb-6 relative">
                    <div class="mb-6 relative flex flex-col gap-2">
                        <div class="mb-4">
                            <p class="text-sm text-gray-500 dark:text-gray-400">Pilih fitur yang akan diaktifkan</p>
                        </div>
                        <div class="flex flex-row gap-4">
                            <label class="inline-flex items-center cursor-pointer">
                                <input type="checkbox" name="fitur_siswa" id="fitur_siswa" {% if instalasi.fitur_siswa %}checked{% endif
                                    %} class="sr-only peer">
                                <div
                                    class="relative w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600">
                                </div>
                                <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300">Siswa</span>
                            </label>
                            <label class="inline-flex items-center cursor-pointer">
                                <input type="checkbox" name="fitur_guru" {% if instalasi.fitur_guru %}checked{% endif %}
                                    class="sr-only peer">
                                <div
                                    class="relative w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600">
                                </div>
                                <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300">Guru</span>
                            </label>
                            <label class="inline-flex items-center cursor-pointer">
                                <input type="checkbox" name="fitur_karyawan" {% if instalasi.fitur_karyawan %}checked{%
                                    endif %} class="sr-only peer">
                                <div
                                    class="relative w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600">
                                </div>
                                <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300">Karyawan</span>
                            </label>
                        </div>
                    </div>
                    <div id="telegram_token_input" class="mb-6 relative" style="display: none;">
                        <input type="text" id="telegram_token" name="telegram_token" value="{{ instalasi.telegram_token }}" class="block rounded-t-lg px-2.5 pb-2.5 pt-5 w-full text-sm text-gray-900 bg-gray-50 dark:bg-gray-700 border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer"
                            placeholder=" " />
                        <label for="telegram_token" class="absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-4 z-10 origin-[0] start-2.5 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto">Telegram Token</label>
                    </div>
                    <div class="flex mb-6 space-x-4">
                        <div class="w-1/2 relative">
                            <input type="time" id="jam_masuk" name="jam_masuk" value="{{ instalasi.jam_masuk|time:'H:i' }}" class="block rounded-t-lg px-2.5 pb-2.5 pt-5 w-full text-sm text-gray-900 bg-gray-50 dark:bg-gray-700 border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer" placeholder=" " />
                            <label for="jam_masuk" class="absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-4 z-10 origin-[0] start-2.5 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto">Jam Masuk</label>
                        </div>
                        <div class="w-1/2 relative">
                            <input type="time" id="jam_pulang" name="jam_pulang" value="{{ instalasi.jam_pulang|time:'H:i' }}" class="block rounded-t-lg px-2.5 pb-2.5 pt-5 w-full text-sm text-gray-900 bg-gray-50 dark:bg-gray-700 border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer" placeholder=" " />
                            <label for="jam_pulang" class="absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-4 z-10 origin-[0] start-2.5 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto">Jam Pulang</label>
                        </div>
                    </div>
                    <div class="flex items-center justify-center">
                        <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-full w-full focus:outline-none focus:shadow-outline transition duration-300 ease-in-out transform">
                            Simpan Perubahan
                        </button>
                    </div>
                </div>
            </form>
        </div>

        <div class="flex flex-col gap-2 w-[30px]">
            <p class="text-sm text-gray-500 dark:text-gray-400">Reset Website</p>
            <div class="max-w-[30px]">
                <c-btn-reset url="{% url 'admin_pengaturan' %}" button_text="Reset Website" alert_message="Apakah anda yakin ingin mereset pengaturan ini? ini akan menghapus semua data yang ada di dalamnya"></c-btn-reset>
            </div>
        </div>
    </div>
</c-dashboard>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var fiturSiswaCheckbox = document.getElementById('fitur_siswa');
        var telegramTokenInput = document.getElementById('telegram_token_input');

        function toggleTelegramTokenInput() {
            if (fiturSiswaCheckbox.checked) {
                telegramTokenInput.style.display = 'block';
            } else {
                telegramTokenInput.style.display = 'none';
            }
        }

        fiturSiswaCheckbox.addEventListener('change', toggleTelegramTokenInput);

        // Initial check
        toggleTelegramTokenInput();
    });
</script>

{% endblock %}